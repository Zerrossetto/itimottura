<!DOCTYPE html>
<html>
    <head>
        <title>Modulo di pagamento comodati d&#39;uso</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Bootstrap -->
        <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
        <link href="css/main.css" rel="stylesheet" media="screen">
    </head>
    <body onload="updateprice(document.forms[0])">
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/main.js"></script>
        <script type="text/javascript">
            var prezzi = {<?= implode(", ", Helper::implodeDictionary(":", $arr, true)); ?>};
        </script>
        <div id="wrap">
            <!-- Begin page content -->
            <div class="container">
            <div class="page-header">
                <h1>Comodato d&#39;uso <small>Richiesta di autorizzazione</small></h1>
            </div>
            <?php if(@$_POST["do"] == "validate" && array_key_exists("database", $errors)): ?>
            <div class="alert alert-error">
                <p>Si &egrave; verificato un errore interno prego segnalare all&#39;amministratore di sistema.</p>
                <p><?= $errors["database"]; ?></p>
            </div>
            <?php else: ?>
            <p class="lead">Compila i campi sottostanti per procedere alla richiesta di comodato</p>
            <p>
                <form method="post" action="pay.php">
                    <p>
                        <label for="alunno" >Nome dell&#39;alunno</label>
                        <input type="text" name="alunno" maxlength="75" value="<?= @$_POST["alunno"] ?>" onkeydown="canTransmit(this.form)" />
                    </p>
                    <?php if(@$_POST["do"] == "validate" && array_key_exists("alunno", $errors)): ?>
                    <div class="alert alert-error">
                        <?= $errors["alunno"] ?>
                    </div>
                    <?php endif; ?>
                    <p>
                        <label for="emailCompratore">Indirizzo e-mail</label>
                        <input type="text" name="emailCompratore" value="<?= @$_POST["emailCompratore"] ?>" maxlength="50" onkeydown="canTransmit(this.form)" />
                    </p>
                    <?php if(@$_POST["do"] == "validate" && array_key_exists("email", $errors)): ?>
                    <div class="alert alert-error">
                        <?= $errors["email"] ?>
                    </div>
                    <?php endif; ?>
                    <div class="well">
                    	<div class="pull-left" style="padding-right: 60px;">
	                        <label for="classe">Seleziona una classe</label>
	                        <select name="classe" class="input-sel" onchange="updateprice(this.form)">
	                            <option value="">---</option>
	                            <?php foreach (range(1, 5) as $i): ?>
<option value="<?= $i ?>" <?php if(@$_POST["classe"] == $i): ?>selected="selected"<?php endif; ?>><?= $i ?></option>
	                            <?php endforeach; ?> 
	                        </select>
                    	</div>
                    	<div class="pull-left" style="padding-right: 60px;">
	                        <label for="sezione">Sezione</label>
	                        <select name="sezione" class="input-sel" onchange="updateprice(this.form)">
	                            <option value="">---</option>
	                            <?php foreach (range("A", "G") as $i): ?>
<option value="<?= $i ?>" <?php if(@$_POST["sezione"] == $i): ?>selected="selected"<?php endif; ?>><?= $i ?></option>
	                            <?php endforeach; ?>     
	                        </select>
                        </div>
                        <div class="pull-right">
                            <p>Quota comodato: </p>
                            <p><label id="quota" for="totale"><big><strong>&euro; N/A</strong></big></label></p>
                            <input type="hidden" name="totale" />
                        </div>
                        <div class="clearfix">&nbsp;</div>
                    </div>
                    <?php if(@$_POST["do"] == "validate" && array_key_exists("totale", $errors)): ?>
                    <div class="alert alert-error">
                        <?= $errors["totale"] ?>
                     </div>
                    <?php endif; ?>
                    <p>
                        <input type="hidden" name="tipoPagamento" value="CartCred" />
                        <input type="hidden" name="langCompratore" value="it" />
                        <input type="hidden" name="do" value="validate" />
                        <button type="submit" name="submit_btn" class="btn btn-primary btn-large disabled" disabled="disabled" onclick="this.form.submit()">Paga con carta di credito <img src="img/ucb-icn-g.png" alt="ucb-logo" style="width: 32px; height: 32px;" /></button>
                    </p>
                </form>
            </p>
          </div>

          <div id="push"></div>
        <?php endif; /*ends if(array_key_exists("database", $errors))*/ ?>
        </div>

        <div id="footer">
            <div class="container">
                <p class="muted credit">Design&amp;Coding <a href="http://twitter.com/zerrossetto">@Zerrossetto</a> per <a href="http://www.itimottura.it">ITI Mottura</a> (CL). Rilasciato sotto licenza <a href="http://www.gnu.org/licenses/agpl-3.0.txt">GPLv3</a>, <a href="https://github.com/Zerrossetto/itimottura">scarica il codice</a></p>
          </div>
        </div>

    </body>
</html>